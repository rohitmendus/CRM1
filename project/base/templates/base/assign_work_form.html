{% load widget_tweaks %}
{{ form.media }}
<div class="modal-content" id="AssignWorkContainer">
    <div class="row g-0">

      <!-- Left: Details Section -->
      <div class="col-md-4 border-end p-4 bg-light">
        <h5 class="card-title mb-3">Customer Details</h5>
        <p>
            <strong>Customer Details:</strong><br>
            {{ work.customer.name }}<br>
            {{ work.customer.address }}<br>
            {{ work.customer.district }}, {{ work.customer.state }}
        </p>
        <p>
            <strong>Service Types:</strong>
            {% for service in work.service_types.all %}
            {{ service }},<br>
            {% endfor %}
        </p>
        <p><strong>Estimate Amount:</strong> {{ work.estimate_amount }}</p>
        <p>
            <strong>Proposal Required:</strong>
            {% if work.proposal_required %}
            Yes
            {% else %}
            No
            {% endif %}
        </p>
        <p><strong>Status:</strong> {{ work.get_status_display }}</p>
      </div>

      <!-- Right: Form Section -->
      <div class="col-md-8 p-4">
        <h5 class="mb-3">Assign Site Engineer</h5>
        <form method="post" action="{% url 'assign_work' form.instance.id %}">
          {% csrf_token %}
          <div class="row mb-3">
            <div class="col-md-6">
                <div class="form-floating mb-3">
                    {% render_field form.site_engineer class="form-select" id="siteEngineer" %}
                    <label for="siteEngineer">Site Engineer *</label>
                </div>
            </div>
          </div>

          <div class="btn-wrapper mt-5 justify-content-center d-flex">
            <button class="btn btn-primary me-4" type="submit">Save</button>
            <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
</div>
<script>
    $('#assignWorkModal').modal('show');

</script>